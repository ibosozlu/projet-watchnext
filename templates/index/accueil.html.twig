{% extends 'base.html.twig' %}


{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/accueil.css') }}">
{% endblock %}

{% block body %}

    <section class="container home-haut">

        <h3>Séries populaires</h3>
        <br>


        <div class="populaire-row-haut">
            <div class="card-deck">
                <div class="card">
                    <div class="divimage">
                        <a class="thumbnail lien1" id="test" href="">
                            <img class="card-img-top image1" src="" alt="Card image cap"></a>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title title1"></h5>
                        <p></p>
                    </div>
                </div>
                <div class="card">
                    <div class="divimage">
                        <a class="thumbnail lien2" href="">
                            <img class="card-img-top image2" src="" alt="Card image cap"></a>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title title2"></h5>
                        <p></p>
                    </div>
                </div>
                <div class="card">
                    <div class="divimage">
                        <a class="thumbnail lien3" href="">
                            <img class="card-img-top image3" src="" alt="Card image cap"></a>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title title3"></h5>
                        <p></p>
                    </div>
                </div>
                <div class="card">
                    <div class="divimage">
                        <a class="thumbnail lien4" href="">
                            <img class="card-img-top image4" src="" alt="Card image cap"></a>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title title4"></h5>
                        <p></p>
                    </div>
                </div>
                <div class="card">
                    <div class="divimage">
                        <a class="thumbnail lien5" href="">
                            <img class="card-img-top image5" src="" alt="Card image cap"></a>
                    </div>
                    <div class="card-body">
                        <h5 class="card-title title5"></h5>
                        <p class="card-text"></p>
                    </div>
                </div>
            </div>
        </div>

    </section>

    <section class="home-bas container">

        <div class="liked">
            <h3>Séries que vous avez aimées</h3>
            <br>


            <div class="populaire-row-haut">
                <div class="card-deck">
                    <div class="card">
                        <div class="divimage">
                            <a class="thumbnail lien10" id="test" href="">
                                <img class="card-img-top image10" src="{{ ('../../img/noimage.jpg') }}"
                                     alt="Card image cap"></a>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title title10"></h5>
                            <p class="card-text card10"></p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="divimage">
                            <a class="thumbnail lien11" href="">
                                <img class="card-img-top image11" src="{{ ('../../img/noimage.jpg') }}"
                                     alt="Card image cap"></a>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title title11"></h5>
                            <p class="card-text card11"></p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="divimage">
                            <a class="thumbnail lien12" href="">
                                <img class="card-img-top image12" src="{{ ('../../img/noimage.jpg') }}"
                                     alt="Card image cap"></a>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title title12"></h5>
                            <p class="card-text card12"></p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="divimage">
                            <a class="thumbnail lien13" href="">
                                <img class="card-img-top image13" src="{{ ('../../img/noimage.jpg') }}"
                                     alt="Card image cap"></a>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title title13"></h5>
                            <p class="card-text card13"></p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="divimage">
                            <a class="thumbnail lien14" href="">
                                <img class="card-img-top image14" src="{{ ('../../img/noimage.jpg') }}"
                                     alt="Card image cap"></a>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title title14"></h5>
                            <p class="card-text card14"></p>
                        </div>
                    </div>
                </div>


            </div>
    </section>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>

        $(function () { // DOM ready
            // Vérification du format de la série

            var api1 = "https://api.themoviedb.org/3/search/tv?api_key=6f077ac27b8512d9188198b9d2e07cad&query=game-of-thrones";
            // Récupération des données de l'API
            var settings = {
                "async": true,
                "crossDomain": true,
                "url": api1,
                "method": "GET",
                "headers": {},
                "data": "{}"
            }
            // Méthode AJAX
            $.ajax(settings).done(function (response) {
                console.log(response);
                // Remplir la variable content avant de l'inclure dans la div AJAX
                var content1 = '';
                var image1 = '';
                var title1 = '';
                var id1 = '';
                var card1 = '';
                if (response.results[0].poster_path != null) {
                    image1 = 'https://image.tmdb.org/t/p/w300' + response.results[0].poster_path;
                }
                else {
                    image1 = ''
                }
                if (response.results[0].name != '') {
                    title1 = '<div>' + response.results[0].name + '</div>'
                }
                if (response.results[0].overview != '') {
                    content1 = '<div>' + response.results[0].overview + '</div>'
                }
                if (response.results[0].id != '') {
                    id1 = response.results[0].id
                }

                $('.image1').attr("src", image1);
                $('.lien1').attr("href", "http://127.0.0.1:8000/show/" + id1);
                $('.card1').html('').prepend(
                    content1
                );
                $('.title1').html('').prepend(
                    title1
                );
            });
            var api2 = "https://api.themoviedb.org/3/search/tv?api_key=6f077ac27b8512d9188198b9d2e07cad&query=the-walking-dead";
            var settings2 = {
                "async": true,
                "crossDomain": true,
                "url": api2,
                "method": "GET",
                "headers": {},
                "data": "{}"
            }
            $.ajax(settings2).done(function (response) {
                console.log(response);
                // Remplir la variable content avant de l'inclure dans la div AJAX
                var content2 = '';
                var image2 = '';
                var title2 = '';
                var card2 = '';
                var id2 = '';
                if (response.results[0].poster_path != null) {
                    image2 = 'https://image.tmdb.org/t/p/w300' + response.results[0].poster_path;
                }
                else {
                    image2 = ''
                }
                if (response.results[0].name != '') {
                    title2 = '<div>' + response.results[0].name + '</div>'
                }
                if (response.results[0].overview != '') {
                    content2 = '<div> ' + response.results[0].overview + '</div>'
                }
                if (response.results[0].id != '') {
                    id2 = response.results[0].id
                }

                $('.image2').attr("src", image2);
                $('.lien2').attr("href", "http://127.0.0.1:8000/show/" + id2);
                $('.card2').html('').prepend(
                    content2
                );
                $('.title2').html('').prepend(
                    title2
                );
            });
            var api3 = "https://api.themoviedb.org/3/search/tv?api_key=6f077ac27b8512d9188198b9d2e07cad&query=westworld";
            var settings3 = {
                "async": true,
                "crossDomain": true,
                "url": api3,
                "method": "GET",
                "headers": {},
                "data": "{}"
            }
            $.ajax(settings3).done(function (response) {
                console.log(response);
                // Remplir la variable content avant de l'inclure dans la div AJAX
                var content = '';
                var image = '';
                var title = '';
                var i = 0;
                var b = 1;
                var id = '';
                if (response.results[0].poster_path != null) {
                    image = 'https://image.tmdb.org/t/p/w300' + response.results[0].poster_path;
                }
                else {
                    image = ''
                }
                if (response.results[0].name != '') {
                    title = '<div>' + response.results[0].name + '</div>'
                }
                if (response.results[0].overview != '') {
                    content = '<div> ' + response.results[0].overview + '</div>'
                }
                if (response.results[0].id != '') {
                    id = response.results[0].id
                }
                $('.image3').attr("src", image);
                $('.lien3').attr("href", "http://127.0.0.1:8000/show/" + id);
                $('.card3').html('').prepend(
                    content
                );
                $('.title3').html('').prepend(
                    title
                );
            });
            var api4 = "https://api.themoviedb.org/3/search/tv?api_key=6f077ac27b8512d9188198b9d2e07cad&query=breaking-bad";
            var settings4 = {
                "async": true,
                "crossDomain": true,
                "url": api4,
                "method": "GET",
                "headers": {},
                "data": "{}"
            }
            $.ajax(settings4).done(function (response) {
                console.log(response);
                // Remplir la variable content avant de l'inclure dans la div AJAX
                var content = '';
                var image = '';
                var title = '';
                var i = 0;
                var b = 1;
                var id = '';
                if (response.results[0].poster_path != null) {
                    image = 'https://image.tmdb.org/t/p/w300' + response.results[0].poster_path;
                }
                else {
                    image = ''
                }
                if (response.results[0].name != '') {
                    title = '<div>' + response.results[0].name + '</div>'
                }
                if (response.results[0].overview != '') {
                    content = '<div>' + response.results[0].overview + '</div>'
                }
                if (response.results[0].id != '') {
                    id = response.results[0].id
                }
                $('.image4').attr("src", image);
                $('.lien4').attr("href", "http://127.0.0.1:8000/show/" + id);
                $('.card4').html('').prepend(
                    content
                );
                $('.title4').html('').prepend(
                    title
                );
            });
            var api5 = "https://api.themoviedb.org/3/search/tv?api_key=6f077ac27b8512d9188198b9d2e07cad&query=vikings";
            var settings5 = {
                "async": true,
                "crossDomain": true,
                "url": api5,
                "method": "GET",
                "headers": {},
                "data": "{}"
            }
            $.ajax(settings5).done(function (response) {
                    console.log(response);
                    // Remplir la variable content avant de l'inclure dans la div AJAX
                    var content = '';
                    var image = '';
                    var title = '';
                    var i = 0;
                    var b = 1;
                    var id = '';
                    if (response.results[0].poster_path != null) {
                        image = 'https://image.tmdb.org/t/p/w300' + response.results[0].poster_path;
                    }
                    else {
                        image = ''
                    }
                    if (response.results[0].name != '') {
                        title = '<div>' + response.results[0].name + '</div>'
                    }
                    if (response.results[0].overview != '') {
                        content = '<div>' + response.results[0].overview + '</div>'
                    }
                    if (response.results[0].id != '') {
                        id = response.results[0].id
                    }
                    $('.image5').attr("src", image);
                    $('.lien5').attr("href", "http://127.0.0.1:8000/show/" + id);
                    $('.card5').html('').prepend(
                        content
                    );
                    $('.title5').html('').prepend(
                        title
                    );
                }
            );


            //2ème tableau
            // Vérification du format de la série
            {% if test[0].getIdApi is defined %}
            var id = {{ test[0].getIdApi }}
            {% endif %}
                console.log(id);
            if (id != '') {
                var api10 = "https://api.themoviedb.org/3/tv/" + id + "?api_key=6f077ac27b8512d9188198b9d2e07cad&language=fr-FR";
                // Récupération des données de l'API
                var settings = {
                    "async": true,
                    "crossDomain": true,
                    "url": api10,
                    "method": "GET",
                    "headers": {},
                    "data": "{}"
                }
                // Méthode AJAX
                $.ajax(settings).done(function (response) {
                    console.log(response);
                    // Remplir la variable content avant de l'inclure dans la div AJAX
                    var content10 = '';
                    var image10 = '';
                    var title10 = '';
                    var id10 = '';

                    if (response.poster_path != null) {
                        image10 = 'https://image.tmdb.org/t/p/w300' + response.poster_path;
                    }
                    else {
                        image10 = ''
                    }
                    if (response.name != '') {
                        title10 = '<div>' + response.name + '</div>'
                    }
                    if (response.id != '') {
                        id10 = response.id
                    }

                    $('.image10').attr("src", image10);
                    $('.lien10').attr("href", "http://127.0.0.1:8000/show/" + id10);

                    $('.title10').html('').prepend(
                        title10
                    );
                });
            }
            // Vérification du format de la série


            {% if test[1].getIdApi is defined %}
            var id1 = {{ test[1].getIdApi }}
            {% endif %}
            console.log(id1);
            if (id1 != '') {
                console.log('ici');
                var api11 = "https://api.themoviedb.org/3/tv/" + id1 + "?api_key=6f077ac27b8512d9188198b9d2e07cad&language=fr-FR";
                // Récupération des données de l'API
                var settings = {
                    "async": true,
                    "crossDomain": true,
                    "url": api11,
                    "method": "GET",
                    "headers": {},
                    "data": "{}"
                }
                // Méthode AJAX
                $.ajax(settings).done(function (response) {
                    console.log('la');
                    console.log(response);

                    // Remplir la variable content avant de l'inclure dans la div AJAX
                    var content11 = '';
                    var image11 = '';
                    var title11 = '';
                    var id11 = '';

                    if (response.poster_path != null) {
                        image11 = 'https://image.tmdb.org/t/p/w300' + response.poster_path;
                    }
                    else {
                        image11 = ''
                    }
                    if (response.name != '') {
                        title11 = '<div>' + response.name + '</div>'
                    }
                    if (response.id != '') {
                        id11 = response.id
                    }

                    $('.image11').attr("src", image11);
                    $('.lien11').attr("href", "http://127.0.0.1:8000/show/" + id11);

                    $('.title11').html('').prepend(
                        title11
                    );
                });
            }
            // Vérification du format de la série


            {% if test[2].getIdApi is defined %}
            var id2 = {{ test[2].getIdApi }}
            {% endif %}
            if (id2 != '') {
                var api12 = "https://api.themoviedb.org/3/tv/" + id2 + "?api_key=6f077ac27b8512d9188198b9d2e07cad&language=fr-FR";
                // Récupération des données de l'API
                var settings = {
                    "async": true,
                    "crossDomain": true,
                    "url": api12,
                    "method": "GET",
                    "headers": {},
                    "data": "{}"
                }
                // Méthode AJAX
                $.ajax(settings).done(function (response) {
                    console.log(response);
                    // Remplir la variable content avant de l'inclure dans la div AJAX
                    var content12 = '';
                    var image12 = '';
                    var title12 = '';
                    var id12 = '';

                    if (response.poster_path != null) {
                        image12 = 'https://image.tmdb.org/t/p/w300' + response.poster_path;
                    }
                    else {
                        image12 = ''
                    }
                    if (response.name != '') {
                        title12 = '<div>' + response.name + '</div>'
                    }
                    if (response.id != '') {
                        id12 = response.id
                    }

                    $('.image12').attr("src", image12);
                    $('.lien12').attr("href", "http://127.0.0.1:8000/show/" + id12);

                    $('.title12').html('').prepend(
                        title12
                    );
                }); // Vérification du format de la série

                {% if test[3].getIdApi is defined %}
                var id3 = {{ test[3].getIdApi }}
                {% endif %}
                if (id3 != '') {
                    var api13 = "https://api.themoviedb.org/3/tv/" + id3 + "?api_key=6f077ac27b8512d9188198b9d2e07cad&language=fr-FR";
                    // Récupération des données de l'API
                    var settings = {
                        "async": true,
                        "crossDomain": true,
                        "url": api13,
                        "method": "GET",
                        "headers": {},
                        "data": "{}"
                    }
                    // Méthode AJAX
                    $.ajax(settings).done(function (response) {
                        console.log(response);
                        // Remplir la variable content avant de l'inclure dans la div AJAX
                        var content13 = '';
                        var image13 = '';
                        var title13 = '';
                        var id13 = '';

                        if (response.poster_path != null) {
                            image13 = 'https://image.tmdb.org/t/p/w300' + response.poster_path;
                        }
                        else {
                            image13 = ''
                        }
                        if (response.name != '') {
                            title13 = '<div>' + response.name + '</div>'
                        }
                        if (response.id != '') {
                            id13 = response.id
                        }

                        $('.image13').attr("src", image13);
                        $('.lien13').attr("href", "http://127.0.0.1:8000/show/" + id13);

                        $('.title13').html('').prepend(
                            title13
                        );
                    });
                }
            }// Vérification du format de la série
            {% if test[4].getIdApi is defined %}
            var id4 = {{ test[4].getIdApi }}
            {% endif %}
            if (id4 != '') {
                var api14 = "https://api.themoviedb.org/3/tv/" + id4 + "?api_key=6f077ac27b8512d9188198b9d2e07cad&language=fr-FR";
                // Récupération des données de l'API
                var settings = {
                    "async": true,
                    "crossDomain": true,
                    "url": api14,
                    "method": "GET",
                    "headers": {},
                    "data": "{}"
                }
                // Méthode AJAX
                $.ajax(settings).done(function (response) {
                    console.log(response);
                    // Remplir la variable content avant de l'inclure dans la div AJAX
                    var content14 = '';
                    var image14 = '';
                    var title14 = '';
                    var id14 = '';

                    if (response.poster_path != null) {
                        image14 = 'https://image.tmdb.org/t/p/w300' + response.poster_path;
                    }
                    else {
                        image14 = ''
                    }
                    if (response.name != '') {
                        title14 = '<div>' + response.name + '</div>'
                    }
                    if (response.id != '') {
                        id14 = response.id
                    }

                    $('.image14').attr("src", image14);
                    $('.lien14').attr("href", "http://127.0.0.1:8000/show/" + id14);

                    $('.title14').html('').prepend(
                        title14
                    );
                });

            }
        })


    </script>
{% endblock %}